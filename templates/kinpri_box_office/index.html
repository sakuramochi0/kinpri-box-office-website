{% extends 'kinpri_box_office/base.html' %}
{% load staticfiles %}
{% block head %}
<script type="text/javascript">
 google.charts.load('current', {'packages':['corechart']});
 google.charts.setOnLoadCallback(drawChart);
 
 function drawChart() {
     // daily chart
     var jsonData = $.ajax({
         url: "api/v1/mimorin/daily.json",
         dataType: "json",
         async: false
     }).responseText;

     console.log(jsonData);
     
     var data = new google.visualization.arrayToDataTable(JSON.parse(jsonData));
     var chart = new google.visualization.ColumnChart(document.getElementById('daily'));
     var options = {
         title: '『KING OF PRISM -PRIDE the HERO-』1日の販売座席数',
         legend: { position: 'none' },
     }
     chart.draw(data, options);

     // weekly chart
     var jsonData = $.ajax({
         url: "api/v1/mimorin/weekly.json",
         dataType: "json",
         async: false
     }).responseText;

     console.log(jsonData);
     
     var data = new google.visualization.arrayToDataTable(JSON.parse(jsonData));
     var chart = new google.visualization.ColumnChart(document.getElementById('weekly'));
     var options = {
         title: '『KING OF PRISM -PRIDE the HERO-』週ごとの販売座席数と上映回数',
         series: [
             {targetAxisIndex: 0},
             {targetAxisIndex: 1},
         ],
     }
     chart.draw(data, options);
 }
 
</script>
{% endblock %}
{% block body %}
<div class="container">
    <h1>📈 キンプラ 座席販売数グラフ 📊</h1>

    <p>
        『KING OF PRISM -PRIDE the HERO-』の座席販売数をグラフにしたページです。TOHOシネマズ、109、KINEZO、MOVIX、ユナイテッドシネマの販売数を基にしています。
    </p>
    <p>
        「『プリティーリズム・レディースパーキング！』を見たかったら金を払え！100億！！」
        <a href="#1"><sup>*1</sup></a> 
    </p>
    <p>
        何かあれば、<a href="https://twitter.com/skrmch_rhythpri"><i class="fa fa-twitter"></i>さくらもち (@skrmch_rhythpri)</a> までお知らせください。
    </p>

    <div class="tweet-btn">
        <a href="https://twitter.com/share" class="twitter-share-button" data-size="large" data-hashtags="prettyrhythm,kinpri">このページをツイートする</a>
    </div>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    <div class="cointainer">
        <div id="daily"></div>
        <div id="weekly"></div>
    </div>

    <p>
        データのソース: <a href="http://mimorin2014.blog.fc2.com/">興行収入を見守りたい！</a>さんのデータを使わせてもらっています。

        <footer>
            <hr>
            <p>
                <a name="1"></a>
                *1 念のため言うと、キンプラの法月仁の台詞のパロディです。
            </p>
        
        <p>
            このサービスのソースコードは、
            <i class="fa fa-github"></i>
            GitHubで公開しています。
            <a href="https://github.com/sakuramochi0/kinpri-box-office">
                scraper
            </a>
            /
            <a href="https://github.com/sakuramochi0/kinpri-box-office-website">
                website
            </a>
        </p>
        
        <p>作者:
            <a href="https://twitter.com/skrmch_rhythpri">
                <i class="fa fa-twitter"></i>
                さくらもち (@skrmch_rhythpri)
            </a>
        </p>
    </footer>
</div>
{% endblock %}
